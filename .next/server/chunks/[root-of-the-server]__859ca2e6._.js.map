{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///home/mcka_ron/Documents/develop/scalable-ia/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from \"@prisma/client\";\n\n// PrismaClient is attached to the `global` object in development to prevent\n// exhausting your database connection limit.\nconst globalForPrisma = global as unknown as { prisma: PrismaClient };\n\nexport const prisma = globalForPrisma.prisma || new PrismaClient();\n\nif (process.env.NODE_ENV !== \"production\") globalForPrisma.prisma = prisma;\n\nexport default prisma;\n"],"names":[],"mappings":";;;;AAAA;;AAEA,4EAA4E;AAC5E,6CAA6C;AAC7C,MAAM,kBAAkB;AAEjB,MAAM,SAAS,gBAAgB,MAAM,IAAI,IAAI,6HAAA,CAAA,eAAY;AAEhE,wCAA2C,gBAAgB,MAAM,GAAG;uCAErD","debugId":null}},
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":["file:///home/mcka_ron/Documents/develop/scalable-ia/src/app/api/site-generation/route.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-vars */\nimport { SummaryStatus } from \"@prisma/client\";\nimport { NextResponse } from \"next/server\";\nimport OpenAI from \"openai\";\nimport prisma from \"~/lib/prisma\";\n\nexport async function POST(request: Request) {\n  try {\n    // Parse the request body\n    const body = await request.json();\n    const { text } = body;\n\n    if (!text) {\n      return NextResponse.json({ error: \"Text is required\" }, { status: 400 });\n    }\n\n    // Initialize OpenAI client with API key from environment variable\n    const openai = new OpenAI({\n      apiKey: process.env.OPENAI_API_KEY,\n    });\n\n    const promptTranca = `\n      Necesito que hagas un resumen de la siguiente entrada:\n      ${text}\n\n      Sigue la siguiente estructura:\n      Resumen:\n      [resumen]\n\n      Puntos clave:\n      [puntos clave]\n\n      Formato html, usa negritas, cursivas, listas, etc para que el resumen sea más legible.\n      estiliza el texto con inner css para que los título (resumen y puntos clave) sean más visibles.\n    `;\n\n    // Call OpenAI API\n    const chatCompletion = await openai.chat.completions.create({\n      messages: [\n        {\n          role: \"system\",\n          content:\n            \"Eres un asistente experto en hacer resúmenes detallados pero cortos.\",\n        },\n        { role: \"user\", content: promptTranca },\n      ],\n      model: \"gpt-3.5-turbo\",\n    });\n\n    // Get the response from OpenAI\n    const aiResponse = chatCompletion.choices[0].message.content;\n\n    // Return the response\n    return NextResponse.json({\n      message: \"Summary generated successfully\",\n      summary: aiResponse,\n    });\n  } catch (error) {\n    console.error(\"API Error:\", error);\n    return NextResponse.json(\n      { error: \"Failed to generate summary\" },\n      { status: 500 }\n    );\n  }\n}\n\n// Add a new function to save summaries\nexport async function PUT(request: Request) {\n  try {\n    // Parse the request body\n    const body = await request.json();\n    const { text, summary } = body;\n\n    if (!text || !summary) {\n      return NextResponse.json(\n        { error: \"Text and summary are required\" },\n        { status: 400 }\n      );\n    }\n\n    // Save the summary to the database\n    const savedSummary = await prisma.summary.create({\n      data: {\n        text,\n        summary,\n        generatedAt: new Date(),\n        status: SummaryStatus.GENERATED,\n      },\n    });\n\n    // Return the response\n    return NextResponse.json({\n      message: \"Summary saved successfully\",\n      summary: savedSummary,\n    });\n  } catch (error) {\n    console.error(\"API Error:\", error);\n    return NextResponse.json(\n      { error: \"Failed to save summary\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":"AAAA,oDAAoD;;;;AACpD;AACA;AACA;AACA;;;;;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,yBAAyB;QACzB,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,IAAI,EAAE,GAAG;QAEjB,IAAI,CAAC,MAAM;YACT,OAAO,+PAAA,CAAA,eAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAmB,GAAG;gBAAE,QAAQ;YAAI;QACxE;QAEA,kEAAkE;QAClE,MAAM,SAAS,IAAI,sMAAA,CAAA,UAAM,CAAC;YACxB,QAAQ,QAAQ,GAAG,CAAC,cAAc;QACpC;QAEA,MAAM,eAAe,CAAC;;MAEpB,EAAE,KAAK;;;;;;;;;;;IAWT,CAAC;QAED,kBAAkB;QAClB,MAAM,iBAAiB,MAAM,OAAO,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC;YAC1D,UAAU;gBACR;oBACE,MAAM;oBACN,SACE;gBACJ;gBACA;oBAAE,MAAM;oBAAQ,SAAS;gBAAa;aACvC;YACD,OAAO;QACT;QAEA,+BAA+B;QAC/B,MAAM,aAAa,eAAe,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,OAAO;QAE5D,sBAAsB;QACtB,OAAO,+PAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;QACX;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,cAAc;QAC5B,OAAO,+PAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA6B,GACtC;YAAE,QAAQ;QAAI;IAElB;AACF;AAGO,eAAe,IAAI,OAAgB;IACxC,IAAI;QACF,yBAAyB;QACzB,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG;QAE1B,IAAI,CAAC,QAAQ,CAAC,SAAS;YACrB,OAAO,+PAAA,CAAA,eAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAgC,GACzC;gBAAE,QAAQ;YAAI;QAElB;QAEA,mCAAmC;QACnC,MAAM,eAAe,MAAM,sHAAA,CAAA,UAAM,CAAC,OAAO,CAAC,MAAM,CAAC;YAC/C,MAAM;gBACJ;gBACA;gBACA,aAAa,IAAI;gBACjB,QAAQ,6HAAA,CAAA,gBAAa,CAAC,SAAS;YACjC;QACF;QAEA,sBAAsB;QACtB,OAAO,+PAAA,CAAA,eAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;QACX;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,cAAc;QAC5B,OAAO,+PAAA,CAAA,eAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAyB,GAClC;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}